<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="js/main.js"></script>
    <script src="jquery.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="index.css"> -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
  </head>

  <body>

    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>

    <div id="map" style="width: 100%; height: 100%">

    </div>

    <script>
      rentals = [];

      var dataPointIcon = L.icon({
        iconUrl: '/Images/PointMarker.png',
        iconSize: [20, 20],
      });

      // Create variable to hold map element, give initial settings to map
      var map = L.map('map',{ center: [-41.285267, 174.776822], zoom: 14});
      // Add OpenStreetMap tile layer to map element
      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap' }).addTo(map);
      // Create point feature for Kendall Square T Station

       $.getJSON("data/WCC_Suburbs_Boundaries.geojson",function(data){

        L.geoJson(data).addTo(map);
      });

      $.getJSON("http://localhost:3000/listings", function(data){

       //console.log(data);
       data.forEach((element) => {
         rentals.push(element);
       })

       rentals.forEach((element) =>{
         var myDataPoint = L.marker([element.geoLoc.Latitude, element.geoLoc.Longitude], {icon: dataPointIcon}).addTo(map);
         myDataPoint.bindTooltip("$"+element.rentPerRoom, {permanent: true}).openTooltip();

         myDataPoint.bindPopup('<img src="../../Images/housePlaceholder.jpg" width="100" height="80"><br> <p>$'+element.rentPerRoom+'</p>');
       })
     });



    </script>




</html>
